<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
	</head>
<body>
<h1>Hello World</h1>
<p>I'm hosted with GitHub Pages.</p>
<button onclick="lancia()">start</button>
<script type="text/css">
	.gianni{
		color: red;
	}
</script>
<button onclick="chiudi()">chiudi</button>

<script type='text/javascript'>
	function chiudi(){
	embeddedservice_bootstrap.userVerificationAPI.clearSession(true).then(() => {
		embeddedservice_bootstrap.utilAPI.removeAllComponents()
	  });
	}
</script>
<script type='text/javascript'>
	function initEmbeddedMessaging() {
		try {
			embeddedservice_bootstrap.settings.language = 'it'; // For example, enter 'en' or 'en-US'

			embeddedservice_bootstrap.init(
				'00DbX0000002SbJ',
				'UB_Website',
				'https://enterprise-business-7016--ubrokeruat.sandbox.my.site.com/ESWUBWebsite1730991064003',
				{
					scrt2URL: 'https://enterprise-business-7016--ubrokeruat.sandbox.my.salesforce-scrt.com'
				}
			);
		} catch (err) {
			console.error('Error loading Embedded Messaging: ', err);
		}
	};
</script>
<script type='text/javascript' src='https://enterprise-business-7016--ubrokeruat.sandbox.my.site.com/ESWUBWebsite1730991064003/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>
// Call Launch Chat API.
<script>
    function launchChat() {
		console.log('chiamata');
        embeddedservice_bootstrap.utilAPI.launchChat()
            .then((result) => {
                // Success handler used to perform actions
                // when the chat client launches successfully.
                // For example, create a method that disables the launch chat button.
                // disableLaunchChatButton();
				console.log('then')
				console.log(result)
				console.log(JSON.stringify(result))
            }).catch((error) => {
                // Error handler used to perform actions
                // if the chat client fails to launch.
                // For example, create a method that hides the launch chat button.
                // hideLaunchChatButton();
				console.log('catch');
				console.log(error);
            }).finally(() => {
                // Finally handler used to perform any clean-up actions
                // regardless of whether the chat client launches successfully or not.
                // For example, create a method that logs the user’s attempt to chat.
                // logEndUserAttemptToChat();
				console.log('finally');
            });
    }
</script>
<!-- <script>
window.addEventListener("onEmbeddedMessagingReady", () => {
	console.log("Received the onEmbeddedMessagingReady event…");
	launchChat();
	// The JavaScrip API is ready for calls.
  });
</script> -->
<script>
window.addEventListener("onEmbeddedMessagingConversationStarted", (result) => {
	console.log("Received the onEmbeddedMessagingConversationStarted event…");
	console.log(result)
  });
</script>
<script>
function lancia(){
	console.log("Received the onEmbeddedMessagingReady event…");
	launchChat();
	// The JavaScrip API is ready for calls.
  }
</script>
</body>
</html>